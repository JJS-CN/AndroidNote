## mac下使用charles进行抓包

在mac平台下，对手机上的应用进行抓包分析或者是对mac上产生的http请求进行网络分析，可以通过Charles完成

### 下载并破解
参考这篇文章[抓包之Charles For Mac 4.0+破解版](http://www.jianshu.com/p/1c1023036a75) 这篇文章提供了下载地址，可以下载到作者破解好的charles软件，并按照文章中所说的进行破解，过程还是比较傻瓜式的，没有什么难度

### 在手机上设置代理

在手机上配置代理后，我们才能捕获到手机上的http请求，并对其进行分析。代理的地址就是mac电脑上的ip地址（端口默认8888即可），需要保证的是手机和电脑都是用一个网络下，也就是说用的同一个wifi。具体就不截图了。这样就可以抓取到手机上(我的是android手机，红米3)所有的网络请求了。接着就可以愉快的玩耍了

### 进一步设置查看https的请求
上一步操作结束后，我们发现大部分的网络请求我们都是可以看到的，包括一个http请求过程中的header，request，response等等，但是如果是一个https的呢。我们就无能为力了，这个时候就需要我们给手机添加一个信任的证书，这个证书是通过Charles生成的，把这个证书安装在我们的手机上。

1. 导出证书，传给android手机。Help-->SSL Proxying-->Save Charles Root Certificate... 这样既可导出我们的证书
2. 把证书上传到手机sd卡里面
3. 红米手机打开系统密码设置，开启密码(为了可以方便的安装证书)
4. 选择红米手机设置-->其他高级设置-->安全和隐私-->从存储设备安装,即可一步步操作到sd卡中找到我们的证书文件(类似这样的名字charles-xxx.pem)，然后就可以安装，到此此台mac既可对这部红米手机进行全方位的监控了。

参考上述步骤，即可配置好证书，同事也可以查看我们的https请求了

但是用起来的时候，你还会发现出现一个SSL Proxying not enabled for this host: enable in Proxy Settings, SSL locations 这样的红叉叉提示，那是因为没有开启ssl，点击左侧的http请求，右键就可以看到一个按钮Enable SSL Proxy即可

### 对饿了么app进行测试实验

这是之前查资料的时候参考的一篇文章[如何用charles进行https抓包](http://www.jianshu.com/p/923eca294579)

来研究下饿了么app的请求是怎么回事，哈哈。
下回继续，待续



